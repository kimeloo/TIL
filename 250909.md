# Java 초기화 블록과 Static 초기화 블록

## 1. 초기화 블록 (Instance Initialization Block)

### 개념
- 인스턴스가 생성될 때마다 실행되는 코드 블록
- 생성자보다 먼저 실행됨
- 여러 생성자에서 공통으로 수행해야 하는 초기화 작업을 줄이는 데 유용

### 문법
```java
{
    // 초기화 코드
}
```

### 예제
```java
public class Car {
    private int currentSpeed;
    private String brand;
    
    // 초기화 블록
    {
        this.currentSpeed = 0;
        System.out.println("Car 초기화 블록 실행");
    }
    
    public Car() {
        this.brand = "Unknown";
    }
    
    public Car(String brand) {
        this.brand = brand;
    }
}
```

## 2. Static 초기화 블록 (Static Initialization Block)

### 개념
- 클래스가 처음으로 메모리에 로드될 때 **단 한 번만** 실행
- 클래스 변수(static 변수)의 초기화에 사용
- 복잡한 초기화 로직이 필요한 경우 유용

### 문법
```java
static {
    // 정적 초기화 코드
}
```

### 예제
```java
public class Configuration {
    private static String configPath;
    private static Properties properties;
    
    // static 초기화 블록
    static {
        configPath = "/config/app.properties";
        properties = new Properties();
        System.out.println("Configuration 클래스 로드됨");
    }
    
    public static String getConfigPath() {
        return configPath;
    }
}
```

## 3. 초기화 순서

### 클래스 변수 초기화 순서
1. **기본값** 할당
2. **명시적 초기화** (선언과 동시에 값 할당)
3. **Static 초기화 블록** 실행

### 인스턴스 변수 초기화 순서
1. **기본값** 할당
2. **명시적 초기화** (선언과 동시에 값 할당)
3. **초기화 블록** 실행
4. **생성자** 실행

### 전체 실행 순서 예제
```java
public class InitializationOrder {
    private static int staticVar = initStaticVar();
    private int instanceVar = initInstanceVar();
    
    static {
        System.out.println("3. Static 초기화 블록");
    }
    
    {
        System.out.println("5. 초기화 블록");
    }
    
    public InitializationOrder() {
        System.out.println("6. 생성자");
    }
    
    private static int initStaticVar() {
        System.out.println("2. Static 변수 명시적 초기화");
        return 10;
    }
    
    private int initInstanceVar() {
        System.out.println("4. 인스턴스 변수 명시적 초기화");
        return 20;
    }
    
    public static void main(String[] args) {
        System.out.println("1. main 메서드 시작");
        new InitializationOrder();
    }
}
```

**출력 결과:**
```
1. main 메서드 시작
2. Static 변수 명시적 초기화
3. Static 초기화 블록
4. 인스턴스 변수 명시적 초기화
5. 초기화 블록
6. 생성자
```

## 4. 사용 시기와 장점

### 초기화 블록
- 모든 생성자에서 공통으로 수행해야 하는 작업
- 생성자 오버로딩 시 코드 중복 방지
- 복잡한 초기화 로직이 필요한 경우

### Static 초기화 블록
- 클래스 레벨의 설정이나 리소스 초기화
- 복잡한 static 변수 초기화
- 예외 처리가 필요한 static 초기화

## 5. 주의사항

1. **초기화 블록은 생성자보다 먼저 실행**되므로 생성자 매개변수에 의존하는 초기화는 불가능
2. **Static 블록에서는 인스턴스 변수나 메서드에 접근 불가**
3. 여러 초기화 블록이 있을 경우 **선언 순서대로 실행**
4. 마지막에 초기화된 값이 최종값이 됨

## 참고
- [Java 초기화 블록과 Static 초기화 블록](https://mag1c.tistory.com/363)